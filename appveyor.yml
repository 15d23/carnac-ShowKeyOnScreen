version: 2.2.{build}
configuration: Release
skip_branch_with_pr: true
skip_tags: true
assembly_info:
  patch: true
  file: '**\AssemblyInfo.*'
  assembly_version: '{version}'
  assembly_file_version: '{version}'
  assembly_informational_version: '{version}'
environment:
  Version: $(APPVEYOR_BUILD_VERSION)
  GithubRepo: $(APPVEYOR_REPO_NAME)
  GithubAuthToken:
    secure: N+4Z+ppud7de8Cn78ZteRln/5FTqpJw9JUi2V51G9P5JIr9Nw7a8VNpfGW3+rG1w
build_script:
- cmd: PowerShell -Version 2.0 .\build.ps1 -Configuration Release -Experimental -ScriptArgs '--packageversion="%APPVEYOR_BUILD_VERSION%" --authtoken="%GithubAuthToken%"'
test:
  assemblies:
    - '**\Carnac.Tests.dll'
artifacts:
- path: deploy\Chocolatey\*.nupkg
  name: ChocoPackage
- path: deploy\GitHub\*.zip
  name: ZipPackage
- path: deploy\Squirrel\Releases\*
  name: SquirrelPackage
- path: deploy\Checksums\*.txt
  name: Checksums
deploy:
- provider: GitHub
  auth_token:
    secure: N+4Z+ppud7de8Cn78ZteRln/5FTqpJw9JUi2V51G9P5JIr9Nw7a8VNpfGW3+rG1w
  artifact: ZipPackage
  draft: false
  on:
    branch: master
    APPVEYOR_REPO_TAG: true
- provider: GitHub
  auth_token:
    secure: N+4Z+ppud7de8Cn78ZteRln/5FTqpJw9JUi2V51G9P5JIr9Nw7a8VNpfGW3+rG1w
  artifact: SquirrelPackage
  draft: false
  on:
    branch: master
    APPVEYOR_REPO_TAG: true
- provider: GitHub
  auth_token:
    secure: N+4Z+ppud7de8Cn78ZteRln/5FTqpJw9JUi2V51G9P5JIr9Nw7a8VNpfGW3+rG1w
  artifact: Checksums
  draft: false
  on:
    branch: master
    APPVEYOR_REPO_TAG: true
- provider: NuGet
  server: https://chocolatey.org/
  api_key:
    secure: sMCceYyOHQxaJMpcWBGmbGkbB6aYToUWm3rqfLv1ZZaeToqM2PAz1or18hnJbon0
  skip_symbols: true
  artifact: ChocoPackage
  on:
    branch: master
    APPVEYOR_REPO_TAG: true